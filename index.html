<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>前端小白羊</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="一只web前端修仙的小白羊的学习感悟">
<meta property="og:type" content="website">
<meta property="og:title" content="前端小白羊">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="前端小白羊">
<meta property="og:description" content="一只web前端修仙的小白羊的学习感悟">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="前端小白羊">
<meta name="twitter:description" content="一只web前端修仙的小白羊的学习感悟">
  
    <link rel="alternate" href="/atom.xml" title="前端小白羊" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">前端小白羊</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">我希望用咔咔作响的键盘创造出各式各样的产品</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">主页</a>
        
          <a class="main-nav-link" href="/archives">分类</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-js深入之原型及原型链" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/24/js深入之原型及原型链/" class="article-date">
  <time datetime="2017-09-24T08:28:09.000Z" itemprop="datePublished">2017-09-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/分类文件/js深入系列/">js深入系列</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/24/js深入之原型及原型链/">js深入之原型及原型链</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###前言</p>
<p>有关于原型及原型链方面的知识，总能听见身边学习玄学js的同学朋友说起，经过学习<a href="https://github.com/mqyqingfeng/Blog" target="_blank" rel="external">讶羽的博客</a>，今天简单谈一下这方面的理解。</p>
<p>###注：</p>
<p>为了思路清晰，这里从<strong>构造函数并创建其对象、prototype、___proto___、constructor、实例与原型、原型的原型、原型链几方面</strong>来分析原型整体构思。<br>首先看下面原型整体思维图，来逐步进行分析。<br><img src="http://owu5yrdgy.bkt.clouddn.com/CCA9CC75-C468-41CA-824D-6A6C11A66370.png" alt=""></p>
<p>###构造函数及创建对象</p>
<p>先用构造函数创建对象:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</div><div class="line">person.name = <span class="string">'Kevin'</span>;</div><div class="line"><span class="built_in">console</span>.log(person.name) <span class="comment">// Kevin</span></div></pre></td></tr></table></figure>
<p>这里面Person为构造函数，person为实例对象。</p>
<p>###prototype</p>
<p>先看个例子</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function Person() &#123;&#125;</div><div class="line">// 虽然写在注释里，但是你要注意：</div><div class="line">// prototype是函数才会有的属性</div><div class="line">Person.prototype.name = &apos;Kevin&apos;;</div><div class="line">var person1 = new Person();</div><div class="line">var person2 = new Person();</div><div class="line">console.log(person1.name) // Kevin</div><div class="line">console.log(person2.name) // Kevin</div></pre></td></tr></table></figure>
<p>每个函数都有一个prototype属性，那该属性指向啥呢？当然是一个对象了，这个对象正是调用该构造函数而创建的实例的原型（见图理解），也就是这个例子中person1和person2的原型。（原型：每一个js对象创建的时候都有与之对应的另外一个对象，该对象就是原型，且每个对象都可以从原型“继承”属性）。<br>这里的继承：比如给Person的原型赋name属性，实例person1和person2就可以继承name属性</p>
<h3 id="proto"><a href="#proto" class="headerlink" title="proto"></a><strong>proto</strong></h3><p>1.上面的构造函数Person可通过prototype指向原型，那实例化对象比如person1有没有办法指向原型呢？当然有了，看下面例子（建议用控制台试一下）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">function Person() &#123;&#125;</div><div class="line">var person = new Person();</div><div class="line">console.log(person.__proto__ === Person.prototype); // true</div></pre></td></tr></table></figure>
<p>这里可见实例化对象person通过__proto_<em>指向原型，除此之外，\</em>_proto__还有啥用呢？</p>
<p>2.当读取实例属性时候，如果找不到，就去继承原型中的属性，如果还查不到？那咋整？当然是再去找原型的原型喽，知道找到最顶层为止。看下面的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">function Person() &#123;&#125;</div><div class="line"></div><div class="line">Person.prototype.name = &apos;Kevin&apos;;</div><div class="line"></div><div class="line">var person = new Person();</div><div class="line"></div><div class="line">person.name = &apos;Daisy&apos;;</div><div class="line">console.log(person.name) // Daisy</div><div class="line"></div><div class="line">delete person.name;</div><div class="line">console.log(person.name) // Kevin</div></pre></td></tr></table></figure>
<p>这里面的首先给实例原型赋属性值name为“Kevin”，下面给实例化对象也赋属性name为“Daisy”，第一遍访问person的name属性时，值为“Daisy”，delete之后，实例化本身的name已经为空，所以再次访问的时候，就会往上一层寻找name属性，即通过prototype赋的name值，所以这时的值是“Kevin“。</p>
<p>那这里原型的值是通过什么途径被实例化对象继承的呢？答案当然是__proto__属性喽（见图）</p>
<p>那逆向思考一下，原型有没有途径指向构造函数和实例化对象呢？看下面</p>
<p>###constructor</p>
<p>指向实例的倒是没有，但是有指向构造函数的，看下面例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">function Person() &#123;&#125;</div><div class="line">console.log(Person === Person.prototype.constructor); // true</div></pre></td></tr></table></figure>
<p>显而意见，Person的prototype指向原型，原型的constructor指向Person（见图）</p>
<p>综上：可见构造函数、实例化对象、原型之间的大致关系，现在说一下原型的原型：</p>
<p>###原型的原型</p>
<p>前面说到，如果实例化对象没有要被访问的属性，就从其原型身上找，那要是还找不到呢？前面我们已经讲了，原型也是对象啊，既然是对象，就可以用最原始的办法创建对象喽，看下面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var obj = new Object();</div><div class="line">obj.name = &apos;Kevin&apos;</div><div class="line">console.log(obj.name) // Kevin</div></pre></td></tr></table></figure>
<p>这里面可通过最原始的方法创建obj，表示的是不管你是什么玩意，只要类型是对象，都有一个原型与之对应。思考一下构造函数的原型的原型是怎么来的呢？当然是原始Object的原型了，再结合之前所讲，实例的__proto__指向构造函数的prototype，所以有Person.prototype通过__proto__指向其原型Object.prototype（见上图）</p>
<p>###原型链<br>举一反三一下，Object.prototype的原型有么？理论上当然是有的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">console.log(Object.prototype.__proto__ === null) // true</div></pre></td></tr></table></figure>
<p>什么意思呢？null表示什么呢？《javascript高级编程》的理解是这样的：</p>
<blockquote>
<p>null值表示一个空对象指针</p>
<p>只要意在保存对象的变量，就应该明确地让变量保存null值，这样做可以提现null作为空指针的惯例</p>
</blockquote>
<p>通过这个我理解的是，null是一个对象，但是其值为空值，所以虽然理论上Object.prototype有原型，但也可以很粗暴的理解为Object.prototype”没有“原型（没办法，玄学js就是这么奇妙）</p>
<p>那什么是原型链呢？就是通过__proto__传递属性的红色线（见图理解）</p>
<p>###补充</p>
<p>####constructor</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">function Person() &#123;&#125;</div><div class="line">var person = new Person();</div><div class="line">console.log(person.constructor === Person); // true</div></pre></td></tr></table></figure>
<p>person是没有constructor属性的，所以当不能读取该属性的时候怎么办？去原型找（这就是我们理解原型的目的啊），也就是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">person.constructor === Person.prototype.constructor</div></pre></td></tr></table></figure>
<p>####继承or委托？<br>这里补充继承，引用《你不知道的JavaScript》中的话就是：</p>
<blockquote>
<p>继承意味着复制操作，然而 JavaScript 默认并不会复制对象的属性，相反，JavaScript 只是在两个对象之间创建一个关联，这样，一个对象就可以通过委托访问另一个对象的属性和函数，所以与其叫继承，委托的说法反而更准确些。</p>
</blockquote>
<h4 id="proto-1"><a href="#proto-1" class="headerlink" title="proto"></a><strong>proto</strong></h4><p>这个属性其实不属于构造函数的原型，而是来自于Object.prototype</p>
<p>###感悟</p>
<p>学习原型及原型链什么用呢？我理解就是要拓宽眼界，在学习React或者vue那些框架的时候，模块化思维很抽象有时让你很懵逼，为什么呢？因为各个组件间需要庞大的数据传输网，要是不能很好的理解继承（委托）的思想，要是不明白原型及原型链的概念很容易2333，比如刚开始写React组件开始有</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class Add expends Component&#123;</div><div class="line">  constructor(props)&#123;</div><div class="line">    super(props)</div><div class="line">    this.state=&#123;&#125;</div><div class="line">  &#125;</div><div class="line">  ......</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当时就不知道这里的constructor什么意思，对于数据网络也没有什么清晰的思路，经过实践项目的练习已经清晰多了</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/09/24/js深入之原型及原型链/" data-id="cj7yhiybe0000o5fy6882e3wi" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-webpack的理解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/08/webpack的理解/" class="article-date">
  <time datetime="2017-08-08T09:08:52.000Z" itemprop="datePublished">2017-08-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/分类文件/webpack理解/">webpack理解</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/08/webpack的理解/">webpack的理解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="什么是webpack？"><a href="#什么是webpack？" class="headerlink" title="什么是webpack？"></a><strong>什么是webpack？</strong></h1><ol>
<li>相信所有接触过vue或react的朋友们都接触过脚手架，可能我们能想到脚手架？顾名思义呗，联想中国第一艘航母在大连造船厂被脚手架快速搭建，也就是说建造新产品的机器，没错！<strong>webpack</strong>就是为你的项目款速搭建的一款模块加载器兼打包工具，它能把各种资源，例如JS（含JSX）、coffee、样式（含less/sass）、图片等都作为模块来使用和处理。</li>
</ol>
<ol>
<li><p>我们可以直接使用 require(XXX) 的形式来引入各模块，即使它们可能需要经过编译（比如JSX和sass），但我们无须在上面花费太多心思，因为 webpack 有着各种健全的加载器（loader）在默默处理这些事情</p>
<p><img src="http://wiki.hrsoft.net/uploads/201707/5959157433c41_59591574.png" alt=""></p>
<p>比如webpack模块就在<em>../node_modules/.bin/webpack.js</em> 地址</p>
</li>
</ol>
<ol>
<li>你可以不打算将其用在你的项目上，但没有理由不去掌握它，因为以近期 Github 上各大主流的（React相关）项目来说，它们仓库上所展示的示例已经是基于 webpack 来开发的，比如 React-Boostrap 和 Redux。webpack的官网是 <a href="http://webpack.github.io/" target="_blank" rel="external">http://webpack.github.io/</a> ，文档地址是 <a href="http://webpack.github.io/docs/" target="_blank" rel="external">http://webpack.github.io/docs/</a> ，想对其进行更详细了解的可以点进去瞧一瞧。</li>
</ol>
<hr>
<h2 id="webpack-的优势"><a href="#webpack-的优势" class="headerlink" title="webpack 的优势"></a><strong>webpack 的优势</strong></h2><p>其优势主要可以归类为如下几个：</p>
<ol>
<li>webpack 是以 commonJS 的形式来书写脚本滴，但对 AMD/CMD 的支持也很全面，方便旧项目进行代码迁移。</li>
<li>能被模块化的不仅仅是 JS 了。</li>
<li>开发便捷，能替代部分 grunt/gulp 的工作，比如打包、压缩混淆、图片转base64等。</li>
<li>扩展性强，插件机制完善，特别是支持 React 热插拔（见 <a href="https://github.com/gaearon/react-hot-loader" title="react-hot-loader" target="_blank" rel="external">react-hot-loader</a> ）的功能让人眼前一亮。</li>
</ol>
<hr>
<p>我们谈谈第一点。以 AMD/CMD 模式来说，鉴于模块是异步加载的，所以我们常规需要使用 define 函数来帮我们搞回调：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">define([<span class="string">'package/lib'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">lib</span>)</span>&#123;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        lib.log(<span class="string">'hello world!'</span>);</div><div class="line">    &#125; </div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        foo: foo</div><div class="line">    &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>另外为了可以兼容 commonJS 的写法，我们也可以将 define 这么写：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params">require, exports, module</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> someModule = <span class="built_in">require</span>(<span class="string">"someModule"</span>);</div><div class="line">    <span class="keyword">var</span> anotherModule = <span class="built_in">require</span>(<span class="string">"anotherModule"</span>);    </div><div class="line"> </div><div class="line">    someModule.doTehAwesome();</div><div class="line">    anotherModule.doMoarAwesome();</div><div class="line"> </div><div class="line">    exports.asplode = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line">        someModule.doTehAwesome();</div><div class="line">        anotherModule.doMoarAwesome();</div><div class="line">    &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>然而对 webpack 来说，我们可以直接在上面书写 commonJS 形式的语法，无须任何 define （毕竟最终模块都打包在一起，webpack 也会最终自动加上自己的加载器）：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> someModule = <span class="built_in">require</span>(<span class="string">"someModule"</span>);</div><div class="line">    <span class="keyword">var</span> anotherModule = <span class="built_in">require</span>(<span class="string">"anotherModule"</span>);    </div><div class="line"> </div><div class="line">    someModule.doTehAwesome();</div><div class="line">    anotherModule.doMoarAwesome();</div><div class="line"> </div><div class="line">    exports.asplode = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line">        someModule.doTehAwesome();</div><div class="line">        anotherModule.doMoarAwesome();</div><div class="line"> &#125;;</div></pre></td></tr></table></figure></p>
<p>这样的代码看起来简单又自然，可以和各种回调说拜拜啦</p>
<p>不过即使你保留了之前 define 的写法也是可以滴，毕竟 webpack 的兼容性相当出色，方便你旧项目的模块直接迁移过来。</p>
<hr>
<h1 id="安装和配置"><a href="#安装和配置" class="headerlink" title="安装和配置"></a><strong>安装和配置</strong></h1><h3 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a><strong>一、安装</strong></h3><p>我们常规直接使用 npm 的形式来安装：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install webpack -g</div></pre></td></tr></table></figure></p>
<p>当然如果常规项目还是把依赖写入 package.json 包去更人性化：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm init</div><div class="line">$ npm install webpack --save-dev</div></pre></td></tr></table></figure></p>
<h3 id="二、配置"><a href="#二、配置" class="headerlink" title="二、配置"></a><strong>二、配置</strong></h3><p>每个项目下都必须配置有一个 webpack.config.js ，它的作用如同常规的 gulpfile.js/Gruntfile.js ，就是一个配置项，告诉 webpack 它需要做什么。</p>
<p>看一下一下代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</div><div class="line"><span class="keyword">var</span> commonsPlugin = <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(<span class="string">'common.js'</span>);</div><div class="line"> </div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="comment">//插件项</span></div><div class="line">    plugins: [commonsPlugin],</div><div class="line">    <span class="comment">//页面入口文件配置</span></div><div class="line">    entry: &#123;</div><div class="line">        index : <span class="string">'./src/js/page/index.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//入口文件输出配置</span></div><div class="line">    output: &#123;</div><div class="line">        path: <span class="string">'dist/js/page'</span>,</div><div class="line">        filename: <span class="string">'[name].js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="built_in">module</span>: &#123;</div><div class="line">        <span class="comment">//加载器配置</span></div><div class="line">        loaders: [</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: <span class="string">'style-loader!css-loader'</span> &#125;,</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">'jsx-loader?harmony'</span> &#125;,</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>, <span class="attr">loader</span>: <span class="string">'style!css!sass?sourceMap'</span>&#125;,</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.(png|jpg)$/</span>, <span class="attr">loader</span>: <span class="string">'url-loader?limit=8192'</span>&#125;</div><div class="line">        ]</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//其它解决方案配置</span></div><div class="line">    resolve: &#123;</div><div class="line">        root: <span class="string">'E:/github/flux-example/src'</span>, <span class="comment">//绝对路径</span></div><div class="line">        extensions: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.scss'</span>],</div><div class="line">        alias: &#123;</div><div class="line">            AppStore : <span class="string">'js/stores/AppStores.js'</span>,</div><div class="line">            ActionType : <span class="string">'js/actions/ActionType.js'</span>,</div><div class="line">            AppAction : <span class="string">'js/actions/AppAction.js'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>⑴ plugins 是插件项，这里我们使用了一个 CommonsChunkPlugin 的插件，它用于提取多个入口文件的公共脚本部分，然后生成一个 common.js 来方便多页面之间进行复用。<br>⑵ entry 是页面入口文件配置，output 是对应输出项配置（即入口文件最终要生成什么名字的文件、存放到哪里），其语法大致为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    entry: &#123;</div><div class="line">        page1: <span class="string">"./page1"</span>,</div><div class="line">        <span class="comment">//支持数组形式，将加载数组中的所有模块，但以最后一个模块作为输出</span></div><div class="line">        page2: [<span class="string">"./entry1"</span>, <span class="string">"./entry2"</span>]</div><div class="line">    &#125;,</div><div class="line">    output: &#123;</div><div class="line">        path: <span class="string">"dist/js/page"</span>,</div><div class="line">        filename: <span class="string">"[name].bundle.js"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>该段代码最终会生成一个 page1.bundle.js 和 page2.bundle.js，并存放到 ./dist/js/page 文件夹下。bundle.js文件是打包文件，是浏览器可以识别的文件，我们平时模块化开发，将代码写成各组件浏览器是不认识的，所以<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line"></div><div class="line">        <span class="comment">//加载器配置</span></div><div class="line">    rules: [</div><div class="line">	 <span class="comment">//.jsx文件使用 'react-hot-loader和babel-loader 来编译处理（热替代和js转换编译模块）</span></div><div class="line">      &#123;</div><div class="line">        test: <span class="regexp">/\.jsx?$/</span>,</div><div class="line">        loaders: <span class="string">'react-hot-loader!babel-loader'</span>,</div><div class="line">        exclude: <span class="regexp">/node_modules/</span>,</div><div class="line">      &#125;,</div><div class="line">	  <span class="comment">//.css 文件使用 style-loader 和 css-loader和postcss-loader 来处理</span></div><div class="line">      &#123;</div><div class="line">        test: <span class="regexp">/\.css$/</span>,</div><div class="line">        loaders: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>, <span class="string">'postcss-loader'</span>]</div><div class="line">      &#125;,</div><div class="line">	 <span class="comment">//.less文件用'style-loader和css-loader和postcss-loader和less-loader处理</span></div><div class="line">      &#123;</div><div class="line">        test: <span class="regexp">/\.less/</span>,</div><div class="line">        loaders: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>, <span class="string">'postcss-loader'</span>, <span class="string">'less-loader'</span>]</div><div class="line">      &#125;,</div><div class="line">	  <span class="comment">//图片用url-loader处理</span></div><div class="line">      &#123;</div><div class="line">        test: <span class="regexp">/\.(png|jpg|gif|woff|woff2|svg)$/</span>,</div><div class="line">        loaders: [</div><div class="line">          <span class="string">'url-loader?limit=10000&amp;name=[hash:8].[name].[ext]'</span>,</div><div class="line">        ]</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>如上，多个loader之间用“!”连接起来。<br>注意所有的加载器都需要通过 npm 来加载，并建议查阅它们对应的 readme 来看看如何使用。<br>拿最后一个 <a href="https://github.com/webpack/url-loader" title="url-loader" target="_blank" rel="external">url-loader</a> 来说，它会将样式中引用到的图片转为模块来处理，使用该加载器需要先进行安装：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install url-loader -save-dev</div></pre></td></tr></table></figure></p>
<p>配置信息的参数“?limit=1000”表示将所有小于10kb的图片都转为base64形式（其实应该说超过10kb的才使用 url-loader 来映射到文件，否则转为data url形式）。</p>
<p>⑷ 最后是 resolve 配置，这块很好理解，直接写注释了：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">resolve: &#123;</div><div class="line">        <span class="comment">//查找module的话从这里开始查找</span></div><div class="line">        root: <span class="string">'E:/github/flux-example/src'</span>, <span class="comment">//绝对路径</span></div><div class="line">        <span class="comment">//自动扩展文件后缀名，意味着我们require模块可以省略不写后缀名</span></div><div class="line">        extensions: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.scss'</span>],</div><div class="line">        <span class="comment">//模块别名定义，方便后续直接引用别名，无须多写长长的地址</span></div><div class="line">        alias: &#123;</div><div class="line">            AppStore : <span class="string">'js/stores/AppStores.js'</span>,<span class="comment">//后续直接 require('AppStore') 即可</span></div><div class="line">            ActionType : <span class="string">'js/actions/ActionType.js'</span>,</div><div class="line">            AppAction : <span class="string">'js/actions/AppAction.js'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>关于 webpack.config.js 更详尽的配置可以参考<a href="http://webpack.github.io/docs/configuration.html" title="这里" target="_blank" rel="external">这里</a>。</p>
<hr>
<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a><strong>运行</strong></h2><p>webpack 的执行也很简单，直接执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack --display-error-details</div></pre></td></tr></table></figure></p>
<p>即可，后面的参数“–display-error-details”是推荐加上的，方便出错时能查阅更详尽的信息（比如 webpack 寻找模块的过程），从而更好定位到问题。<br>其他主要的参数有：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ webpack --config XXX.js   //使用另一份配置文件（比如webpack.config2.js）来打包</div><div class="line"> </div><div class="line">$ webpack --watch   //监听变动并自动打包</div><div class="line"> </div><div class="line">$ webpack -p    //压缩混淆脚本，这个非常非常重要！</div><div class="line"> </div><div class="line">$ webpack -d    //生成map映射文件，告知哪些模块被最终打包到哪里了</div></pre></td></tr></table></figure></p>
<p>其中的 -p 是很重要的参数，曾经一个未压缩的 700kb 的文件，压缩后直接降到 180kb（主要是样式这块一句就独占一行脚本，导致未压缩脚本变得很大）。</p>
<hr>
<h1 id="模块引入"><a href="#模块引入" class="headerlink" title="模块引入"></a><strong>模块引入</strong></h1><p>上面唠了那么多配置和执行方法，下面开始说说寻常页面和脚本怎么使用吧。</p>
<p>###<strong> 一、HTML</strong><br>直接在页面引入 webpack 最终生成的页面脚本即可，不用再写什么 data-main 或 seajs.use 了：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>React<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span></span></div><div class="line"><span class="tag">          <span class="attr">content</span>=<span class="string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"./favicon.ico"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/assets/bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/fetch/2.0.3/fetch.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>可以看到我们连样式都不用引入，毕竟脚本执行时会动态生成<style>并标签打到head里。</p>
<h3 id="二、JS"><a href="#二、JS" class="headerlink" title="二、JS"></a><strong>二、JS</strong></h3><p>各脚本模块可以直接使用 commonJS 来书写，并可以直接引入未经编译的模块，比如 JSX、sass、coffee等（只要你在 webpack.config.js 里配置好了对应的加载器）。<br>我们再看看编译前的页面入口文件（index.js）：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">'../../css/reset.scss'</span>); <span class="comment">//加载初始化样式</span></div><div class="line"><span class="built_in">require</span>(<span class="string">'../../css/allComponent.scss'</span>); <span class="comment">//加载组件样式</span></div><div class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">'react'</span>);</div><div class="line"><span class="keyword">var</span> AppWrap = <span class="built_in">require</span>(<span class="string">'../component/AppWrap'</span>); <span class="comment">//加载组件</span></div><div class="line"><span class="keyword">var</span> createRedux = <span class="built_in">require</span>(<span class="string">'redux'</span>).createRedux;</div><div class="line"><span class="keyword">var</span> Provider = <span class="built_in">require</span>(<span class="string">'redux/react'</span>).Provider;</div><div class="line"><span class="keyword">var</span> stores = <span class="built_in">require</span>(<span class="string">'AppStore'</span>);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> redux = createRedux(stores);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> App = React.createClass(&#123;</div><div class="line">    render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;Provider redux=&#123;redux&#125;&gt;</div><div class="line">                &#123;<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">AppWrap</span> /&gt;</span>; &#125;&#125;</span></div><div class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></div><div class="line">        );</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">React.render(</div><div class="line">    &lt;App /&gt;, <span class="built_in">document</span>.body</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>注意：上述写法是在webpack.config.js中没有require，否则直接在index.js中引入就可以了，比如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"><span class="keyword">import</span> CommentApp <span class="keyword">from</span> <span class="string">'./components/CommentApp.js'</span></div><div class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span></div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">    &lt;CommentApp /&gt;,</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</div><div class="line">)</div></pre></td></tr></table></figure></p>
<p>一切都是so  easy~ 后续各种有的没的，webpack 都会帮你进行处理</p>
<hr>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h1><p>至此我们已经基本上手了 webpack 的使用，大致理解了webpack是什么，做什么的。是的，他就是依赖各种包（工具）在webpack.config.js中引入（登记），各种依赖就可以助webpack正常构建你写的代码了（脚手架工作），这时候你就可以安心的造航母了！</p>
</style></p>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/08/webpack的理解/" data-id="cj7yhiybt0001o5fy805f9g57" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/分类文件/js深入系列/">js深入系列</a></li><li class="category-list-item"><a class="category-list-link" href="/分类文件/webpack理解/">webpack理解</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/归档文件/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/归档文件/2017/08/">August 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/09/24/js深入之原型及原型链/">js深入之原型及原型链</a>
          </li>
        
          <li>
            <a href="/2017/08/08/webpack的理解/">webpack的理解</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 小白羊<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">分类</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>